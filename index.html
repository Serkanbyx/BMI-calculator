<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A modern, user-friendly BMI Calculator with history tracking and trend analysis."
    />
    <meta name="theme-color" content="#252525" />
    <title>BMI Calculator</title>
    <link rel="icon" type="image/svg+xml" href="icons/favicon.svg" />
    <link rel="apple-touch-icon" href="icons/icon.svg" />
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
  </head>
  <body>
    <main class="container">
      <header>
        <div class="header-top">
          <h1>BMI Calculator</h1>
          <button
            type="button"
            id="themeToggle"
            class="theme-toggle"
            aria-label="Toggle theme"
          >
            <svg
              class="sun-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="5" />
              <line x1="12" y1="1" x2="12" y2="3" />
              <line x1="12" y1="21" x2="12" y2="23" />
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
              <line x1="1" y1="12" x2="3" y2="12" />
              <line x1="21" y1="12" x2="23" y2="12" />
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
            </svg>
            <svg
              class="moon-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
            </svg>
          </button>
        </div>
        <p>Calculate your Body Mass Index efficiently.</p>
      </header>

      <section class="calculator-card">
        <div
          class="unit-toggle-container"
          role="radiogroup"
          aria-label="Unit System"
        >
          <button
            type="button"
            class="unit-btn active"
            id="metricBtn"
            data-unit="metric"
          >
            Metric
            <span class="unit-sub">kg / cm</span>
          </button>
          <button
            type="button"
            class="unit-btn"
            id="imperialBtn"
            data-unit="imperial"
          >
            Imperial
            <span class="unit-sub">lbs / in</span>
          </button>
        </div>

        <form id="bmiForm" novalidate>
          <!-- Age and Gender Row -->
          <div class="form-row">
            <div class="input-group half">
              <label for="age"
                >Age <span class="unit-label">(years)</span></label
              >
              <input
                type="number"
                id="age"
                placeholder="Age"
                min="2"
                max="120"
              />
            </div>
            <div class="input-group half">
              <label for="gender">Gender</label>
              <select id="gender">
                <option value="">Select</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
            </div>
          </div>

          <div class="input-group">
            <label for="height"
              >Height
              <span class="unit-label" id="heightUnitLabel">(cm)</span></label
            >
            <input
              type="number"
              id="height"
              placeholder="Enter height"
              min="50"
              max="250"
              required
            />
          </div>

          <div class="input-group">
            <label for="weight"
              >Weight
              <span class="unit-label" id="weightUnitLabel">(kg)</span></label
            >
            <input
              type="number"
              id="weight"
              placeholder="Enter weight"
              min="1"
              required
            />
          </div>

          <button type="submit" id="calculateBtn">Calculate BMI</button>
        </form>

        <div
          id="resultContainer"
          class="result-container hidden"
          aria-live="polite"
        >
          <div class="score">
            <span id="bmiValue">0.0</span>
            <span id="bmiCategory">Unknown</span>
          </div>
          <div class="result-details">
            <div class="detail-item">
              <span class="detail-label">Ideal Weight</span>
              <span class="detail-value" id="idealWeightRange">--</span>
            </div>
            <div class="detail-item" id="healthRiskContainer">
              <span class="detail-label">Health Risk</span>
              <span class="detail-value" id="healthRisk">--</span>
            </div>
          </div>
          <div class="visualization">
            <div class="bar-container">
              <div class="indicator" id="bmiIndicator"></div>
              <div class="bar-gradient"></div>
            </div>
            <div class="labels">
              <span>Underweight</span>
              <span>Normal</span>
              <span>Overweight</span>
              <span>Obese</span>
            </div>
          </div>
        </div>
      </section>

      <!-- History Section with Chart -->
      <section id="historySection" class="history-section hidden">
        <div class="history-header">
          <h2>ðŸ“Š BMI History</h2>
          <button
            type="button"
            id="clearHistoryBtn"
            class="clear-history-btn"
            aria-label="Clear history"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="3 6 5 6 21 6" />
              <path
                d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
              />
            </svg>
          </button>
        </div>

        <!-- Chart Container -->
        <div class="chart-container">
          <canvas id="bmiChart"></canvas>
        </div>

        <!-- History List -->
        <div class="history-list" id="historyList"></div>
      </section>
    </main>

    <div
      id="modalOverlay"
      class="modal-overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modalMessage"
    >
      <div class="modal-content">
        <div class="modal-icon" id="modalIcon"></div>
        <p id="modalMessage"></p>
        <button type="button" id="modalCloseBtn" class="modal-close-btn">
          OK
        </button>
      </div>
    </div>

    <footer class="sign">
      Created by
      <a
        href="https://serkanbayraktar.com/"
        target="_blank"
        rel="noopener noreferrer"
        >Serkanby</a
      >
      |
      <a
        href="https://github.com/Serkanbyx"
        target="_blank"
        rel="noopener noreferrer"
        >Github</a
      >
    </footer>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="script.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("sw.js")
          .then((reg) => console.log("Service Worker registered"))
          .catch((err) => console.log("Service Worker error", err));
      }
    </script>
  </body>
</html>
